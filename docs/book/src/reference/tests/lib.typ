#import "/book.typ": book-page
#show: book-page.with(title: "Test Library")

The test library is an augmented standard library, it contains all definitions in the standard library plus some additional modules and functions which help testing packages more thoroughly and debug regressions.

It defines the following modules:
- `test`: a module with various testing helpers such as `catch` and additional asserts.

The following items are re-exported in the global scope as well:
- `assert-panic`: originally `test.assert-panic`
- `catch`: originally `test.catch`

= `test`
Contains the main testing utilities.

== `assert-panic`
Ensures that a function panics.

Panics if the function does not panic, returns `none` otherwise.

=== Example
```typst
// panics with the given message
#assert-panic(() => {}, message: "Function did not panic!")

// catches the panic and keeps compilation running
#assert-panic(() => panic())
```

=== Parameters
```txt
assert-panic(
  function,
  message: str | auto,
)
```

#block(inset: 1em, stroke: (left: gray))[
  ==== `function: function`
  - `required`
  - `positional`
 
  The function to test.

  ==== `message: str | auto`
 
  The error message when the assertion fails.
]

== `catch`
Returns the panic message generated by a function, if there was any, returns `none` otherwise.

=== Example
```typst
#assert.eq(catch(() => {}), none)
#assert.eq(
  catch(panics),
  "panicked with: Invalid arg, expected `int`, got `str`",
)
```

=== Parameters
```txt
catch(
  function,
)
```

#block(inset: 1em, stroke: (left: gray))[
  ==== `function: function`
  - `required`
  - `positional`
    The function to test.
]
